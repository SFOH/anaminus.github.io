<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="icon" sizes="16x16" href="/api/img/favicon16.png">

	<title>RemoteFunction Reference</title>
	<link href="/api/css/api.css" rel="stylesheet" type="text/css" media="all">
	<link href="/api/css/ref.css" rel="stylesheet" type="text/css" media="all">
	<script type="text/javascript" src="/api/js/jquery-1.10.2.min.js"></script>
	<script type="text/javascript" src="/api/js/fuse.min.js"></script>
	<script type="text/javascript" src="/api/js/search.js"></script>
</head>
<body>
	<div id="ref-container">
		<div id="ref-box">
			<div id="header">
				<span class="api-class-icon" style="background-position:-1056px"></span><h1>RemoteFunction</h1><span class="history-list">(<a class="api-version version-added" href="/api/diff.html#v0.123">+0.123</a>)</span>
				<span id="header-items">
					<a id="return-link" href="/api">Back to hierarchy<span class="api-member-icon" style="background-position:-48px"></span></a>
				</span>
			</div>
			<div id="box-content">
				<div id="info">
					<div id="summary">
						<div class="markdown">
<p>A <strong>RemoteFunction</strong> creates an interface to a function, which may then be
called from another peer.</p>
						</div>
					</div>
					<div id="members">
						<h2>Members</h2>
						<div id="sectionProperties">
							<h3>Properties</h3>
							<ul>
								<li>8 properties inherited from <a class="api-class-name" href="/api/class/Instance.html#sectionProperties">Instance</a></li>
							</ul>
						</div>
						<div id="sectionFunctions">
							<h3>Functions</h3>
							<ul>
								<li>19 functions inherited from <a class="api-class-name" href="/api/class/Instance.html#sectionFunctions">Instance</a></li>
							</ul>
						</div>
						<div id="sectionYieldFunctions">
							<h3>YieldFunctions</h3>
							<table class="member-list">
								<tr>
									<th class="col-return-type">Returns</th>
									<th class="col-icon"></th>
									<th class="col-name">YieldFunction</th>
								</tr>
								<tr>
									<td class="col-return-type"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a></td>
									<td class="col-icon"><span class="api-member-icon" style="background-position:-64px"></span></td>
									<td class="col-name"><a class="api-member-name" href="#memberInvokeClient">InvokeClient</a> <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Instance.html">Instance</a> <span class="api-argument-name">player</span></span>, <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></td>
								</tr>
								<tr>
									<td class="col-return-type"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a></td>
									<td class="col-icon"><span class="api-member-icon" style="background-position:-64px"></span></td>
									<td class="col-name"><a class="api-member-name" href="#memberInvokeServer">InvokeServer</a> <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></td>
								</tr>
							</table>
							<ul>
								<li>1 yieldfunction inherited from <a class="api-class-name" href="/api/class/Instance.html#sectionYieldFunctions">Instance</a></li>
							</ul>
						</div>
						<div id="sectionEvents">
							<h3>Events</h3>
							<ul>
								<li>7 events inherited from <a class="api-class-name" href="/api/class/Instance.html#sectionEvents">Instance</a></li>
							</ul>
						</div>
						<div id="sectionCallbacks">
							<h3>Callbacks</h3>
							<table class="member-list">
								<tr>
									<th class="col-return-type">Returns</th>
									<th class="col-icon"></th>
									<th class="col-name">Callback</th>
								</tr>
								<tr>
									<td class="col-return-type"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a></td>
									<td class="col-icon"><span class="api-member-icon" style="background-position:-256px"></span></td>
									<td class="col-name"><a class="api-member-name" href="#memberOnClientInvoke">OnClientInvoke</a> <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></td>
								</tr>
								<tr>
									<td class="col-return-type"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a></td>
									<td class="col-icon"><span class="api-member-icon" style="background-position:-256px"></span></td>
									<td class="col-name"><a class="api-member-name" href="#memberOnServerInvoke">OnServerInvoke</a> <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Instance.html">Instance</a> <span class="api-argument-name">player</span></span>, <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></td>
								</tr>
							</table>
						</div>
					</div>
					<div id="details">
						<h2>Detailed Description</h2>
						<div class="markdown">
<p>RemoteFunctions enable a function to be called from another peer. This is done
by replicating the arguments of a call on one peer to another peer, then
replicating the return values back. Functions are yielded to ensure
synchronicity.</p>

<p>RemoteFunctions are generally used for requesting data, since they enable a
peer to send values, and receives values back. If you need to send data to
another peer, but don't require a response, you should use
<a href="RemoteEvent.html">RemoteEvents</a>.</p>

<p>Here's an example that uses InvokeClient and OnClientInvoke:</p>

<p>The client:</p>

<pre><code>name = 'Alice'

function RemoteFunction.OnClientInvoke( player, query )
    if query == 'What is your name?' then
        print("Server asked me for my name")

        local response = 'My name is ' .. name
        return response
    end
end
</code></pre>

<p>The server:</p>

<pre><code>query = 'What is your name?'

response = RemoteFunction:InvokeClient( Game.Players.Player1, query )
name = response:match('^My name is (.-)$')
print("Client's name is " .. name)
</code></pre>

<p>Here's an example that uses InvokeServer and OnServerInvoke:</p>

<p>The server:</p>

<pre><code>function RemoteFunction.OnServerInvoke( player, query )
    if query == 'Can you give me a list of players?' then
        print("Client " .. player.Name .. " didn't say please")
        return false

    elseif query == 'Can you give me a list of players, please?' then
        print("Client " .. player.Name .. " asked for a list of players")

        local list = Game.Players:GetPlayers()
        return list
    end
end
</code></pre>

<p>The client:</p>

<pre><code>query = 'Can you give me a list of players?'

list = RemoteFunction:InvokeServer( query )
if list then
    print("List of players:"")
    for i = 1,#list do
        print("-", list[i])
    end

else
    print("Server did not give me what I asked for. Now he must die."")
end
</code></pre>
						</div>
					</div>
					<div id="member-descriptions">
						<h2>YieldFunction Descriptions</h2>
						<div id="memberInvokeClient">
							<h3><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a><span class="api-member-icon" style="background-position:-64px"></span>RemoteFunction.InvokeClient <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Instance.html">Instance</a> <span class="api-argument-name">player</span></span>, <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></h3>
							<div class="markdown">
<p>Invokes the <a href="#memberOnClientInvoke">OnClientInvoke</a> callback on a particular
client. The target client is indicated by the <em>player</em> argument, which should
be a <a href="Player.html">Player</a> object. Note that this calls the OnClientInvoke
that was defined on the targeted client, and not on the server, or some other
client.</p>

<p><em>arguments</em> are the values that will be replicated to the client, and then
passed to OnClientInvoke. The values returned by OnClientInvoke will be
replicated back to the server, and then returned by InvokeClient.</p>

<p>InvokeClient will yield until OnClientInvoke returns. <s>If OnClientInvoke was
not defined after InvokeClient was called, then the RemoteFunction will wait
until it is defined, and then call it as usual.</s> This only works when the
current peer is also the recipient peer (e.g. the Studio's Play Solo mode acts
as both a server and a client). If onClientInvoke was not defined on the
target client, then InvokeClient will yield forever (or rather, until the
client disconnects, which throws an error). This is likely a bug.</p>

<p>If the target client disconnects before the call could be completed,
InvokeClient will throw the following error:</p>

<pre><code>Player &lt;player name&gt; disconnected during remote call to &lt;RemoteFunction name&gt;
</code></pre>

<p>Right after this error, another sourceless error will be thrown, displaying
the the last extra argument passed to InvokeClient. If no extra arguments were
given, then an unspecified error message will be displayed instead. This is
likely a bug.</p>

<p>If OnClientInvoke throws an error, that error will be replicated back, and
thrown by InvokeClient. Note that this includes the entire error message, with
information about the script, and the line where the error occurred.</p>

<p>This function cannot be called on a client; it may be called only by the
server.</p>
							</div>
						</div>
						<div id="memberInvokeServer">
							<h3><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a><span class="api-member-icon" style="background-position:-64px"></span>RemoteFunction.InvokeServer <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></h3>
							<div class="markdown">
<p>Invokes the <a href="#memberOnServerInvoke">OnServerInvoke</a> callback on the server.
Note that this is the OnServerInvoke defined on the server, and not the
current client, or some other client.</p>

<p><em>arguments</em> are the values that will be replicated to the server, and then
passed to OnServerInvoke. The values returned by OnServerInvoke will be
replicated back to the client, and then returned by InvokeServer.</p>

<p>InvokeServer will yield until OnServerInvoke returns. If OnServerInvoke was
not defined after InvokeServer was called, then the RemoteFunction will wait
until it is defined, and then call it as usual.</p>

<p>If OnServerInvoke throws an error, that error will be replicated back, and
thrown by InvokeServer. Note that this includes the entire error message, with
potentially sensitive information about the script, and the line where the
error occurred. If you do not want this information to be leaked to the
client, then ensure that OnServerInvoke will not throw an error.</p>

<p>This function cannot be called on the server; it may be called only by a
client.</p>
							</div>
						</div>
						<h2>Callback Descriptions</h2>
						<div id="memberOnClientInvoke">
							<h3><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a><span class="api-member-icon" style="background-position:-256px"></span>RemoteFunction.OnClientInvoke <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></h3>
							<div class="markdown">
<p>OnClientInvoke is called after <a href="#memberInvokeClient">InvokeClient</a> is called
on the server, with the current client as its target.</p>

<p><em>arguments</em> are the values that were passed to InvokeClient, and then
replicated to the client. The values returned by OnClientInvoke will be
replicated back to the server, and then returned by InvokeClient.</p>

<p><s>If OnClientInvoke is defined sometime after InvokeClient was called, then
OnClientInvoke will be called immediately.</s> OnClientInvoke will not be
called if InvokeClient is waiting on it. This is likely a bug. OnClientInvoke
is allowed to yield.</p>

<p>The server is allowed to set this callback. However, it will never be called,
since InvokeClient cannot be called from a client, and there are no means for
InvokeClient to target the server.</p>
							</div>
						</div>
						<div id="memberOnServerInvoke">
							<h3><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a><span class="api-member-icon" style="background-position:-256px"></span>RemoteFunction.OnServerInvoke <span class="api-arguments">( <span class="api-argument"><a class="api-value-type" href="/api/type/Instance.html">Instance</a> <span class="api-argument-name">player</span></span>, <span class="api-argument"><a class="api-value-type" href="/api/type/Tuple.html">Tuple</a> <span class="api-argument-name">arguments</span></span> )</span></h3>
							<div class="markdown">
<p>OnServerInvoke is called after <a href="#memberInvokeServer">InvokeServer</a> is called
from a client. <em>player</em> indicates a <a href="Player.html">Player</a> object that
corresponds to the client.</p>

<p><em>arguments</em> are the values that were passed to InvokeServer, and then
replicated to the server. The values returned by OnServerInvoke will be
replicated back to the client, and then returned by InvokeServer.</p>

<p>If OnServerInvoke is defined sometime after InvokeServer was called, then
OnServerInvoke will be called immediately. OnServerInvoke is allowed to yield.</p>

<p>Clients are allowed to set this callback. However, it will never be called,
since InvokeServer cannot be called from the server, and there are no means
for InvokeServer to target a client.</p>
							</div>
						</div>
					</div>
				</div>
				<div id="hierarchy-nav">
					<div id="superclasses">
						<p><b>Inherits:</b></p>
						<ul>
							<li><span class="api-class-icon" style="background-position:-0px"></span><a class="api-class-name" href="/api/class/Instance.html">Instance</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="footer">
		<span>Style is totally not a blatant <a href="http://qt-project.org/">Qt Project</a> rip-off.</span>
	</div>
</body>
</html>
